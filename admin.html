<!DOCTYPE html>
<html>
<head>
<title>Admin Panel</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<style>
body{background:#111;color:white;font-family:Arial;text-align:center}
input,button,select{padding:10px;margin:10px}
button{background:#ff004f;color:white;border:none}
</style>
</head>

<body>

<h2>Admin Upload Panel</h2>

<input type="file" id="file">
<br>
<select id="category">
<option value="nature">Nature</option>
<option value="cars">Cars</option>
<option value="anime">Anime</option>
</select>
<br>
<button onclick="upload()">Upload</button>

<script>

// ðŸ”¥ Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyAxmfvtFRv0E71EAWsqIjzzuejNEMf0_j4",
  authDomain: "rahul-wallpapers.firebaseapp.com",
  projectId: "rahul-wallpapers",
  storageBucket: "rahul-wallpapers.firebasestorage.app",
  messagingSenderId: "511804939153",
  appId: "1:511804939153:web:6c1124241430e4526c5830"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ðŸ”¥ Cloudinary Settings
const CLOUD_NAME = "duxbhwjlq";
const UPLOAD_PRESET = "wallpaper_upload";

function upload(){
let file = document.getElementById("file").files[0];
let category = document.getElementById("category").value;

if(!file){
alert("Please select a file");
return;
}

// Prepare Cloudinary upload
let formData = new FormData();
formData.append("file", file);
formData.append("upload_preset", UPLOAD_PRESET);

fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`, {
  method: "POST",
  body: formData
})
.then(response => response.json())
.then(data => {
  let imageUrl = data.secure_url;
  // Save URL + category to Firestore
  db.collection("photos").add({
    image: imageUrl,
    category: category
  });
  alert("Upload Success!");
})
.catch(err => {
  console.error(err);
  alert("Upload Failed!");
});

}

</script>

</body>
</html>
