<!DOCTYPE html>
<html>
<head>
<title>Rahul XYZ Wallpapers</title>
<meta name="description" content="Download Free HD 4K Wallpapers">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

<style>
body{margin:0;background:#0f0f0f;font-family:Arial;color:white;}
header{background:#000;padding:15px 20px;display:flex;align-items:center;justify-content:space-between;}
.menu-icon{font-size:28px;cursor:pointer;margin-right:15px;}
header h1{margin:0;color:#ff004f;}
#searchBar{padding:5px 10px;border-radius:5px;border:none;width:200px;}
#earnings{background:#111;padding:15px;margin:20px;border-radius:10px;}

.sidebar{
position:fixed;left:-250px;top:0;width:250px;height:100%;background:#1a1a1a;padding-top:60px;transition:0.4s;z-index:1000;
}
.sidebar a{display:block;padding:15px;color:white;text-decoration:none;border-bottom:1px solid #333;}
.sidebar a:hover{background:#ff004f;}
.sidebar.active{left:0;}

.hero{height:250px;display:flex;justify-content:center;align-items:center;background:#111;flex-direction:column;}
.hero h2{margin:0;}
.gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;padding:30px;}
.wall{background:#1a1a1a;border-radius:10px;overflow:hidden;transition:0.3s;position:relative;}
.wall:hover{transform:scale(1.05);}
.wall img{width:100%;cursor:pointer;}
.download{display:block;text-align:center;background:#ff004f;color:white;padding:8px;text-decoration:none;cursor:pointer;margin-top:5px;}
.delete-btn{display:block;text-align:center;background:#ff0000;color:white;padding:5px;text-decoration:none;cursor:pointer;margin-top:5px;}
footer{text-align:center;padding:15px;background:#000;}

/* Lightbox styles */
#lightboxOverlay{
  position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:none;justify-content:center;align-items:center;z-index:9999;flex-direction:column;
}
#lightboxOverlay img{max-width:90%;max-height:80%;border-radius:10px;}
#lightboxOverlay button{margin-top:15px;padding:10px 20px;background:#ff004f;color:white;border:none;cursor:pointer;font-size:16px;}
#lightboxOverlay span{position:absolute;top:20px;right:30px;font-size:40px;color:white;cursor:pointer;}
</style>
</head>

<body>

<div class="sidebar" id="sidebar">
<a href="#" onclick="filterCategory('all')">All</a>
<a href="#" onclick="filterCategory('nature')">Nature</a>
<a href="#" onclick="filterCategory('cars')">Cars</a>
<a href="#" onclick="filterCategory('anime')">Anime</a>
</div>

<header>
<div style="display:flex;align-items:center;">
<span class="menu-icon" onclick="toggleMenu()">☰</span>
<h1>Rahul XYZ Wallpapers</h1>
</div>
<input type="text" id="searchBar" placeholder="Search wallpapers..." onkeyup="searchGallery()">
</header>

<div class="hero">
<h2>Download Free 4K Wallpapers</h2>
</div>

<!-- Admin Panel -->
<div id="adminPanel" style="padding:20px; display:none;">
<h2>Admin Dashboard</h2>

<input type="file" id="fileInput">
<select id="categoryInput">
<option value="nature">Nature</option>
<option value="cars">Cars</option>
<option value="anime">Anime</option>
</select>
<button onclick="uploadPhoto()">Upload Photo</button>

<div id="earnings"></div>
</div>

<div class="gallery" id="gallery"></div>

<!-- Lightbox overlay -->
<div id="lightboxOverlay">
<span onclick="closeLightbox()">×</span>
<img id="lightboxImage">
<button onclick="downloadLightboxImage()">Download</button>
</div>

<footer>© 2026 Rahul XYZ Wallpapers</footer>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyAxmfvtFRv0E71EAWsqIjzzuejNEMf0_j4",
  authDomain: "rahul-wallpapers.firebaseapp.com",
  projectId: "rahul-wallpapers",
  storageBucket: "rahul-wallpapers.firebasestorage.app",
  messagingSenderId: "511804939153",
  appId: "1:511804939153:web:6c1124241430e4526c5830"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

// Admin email
const adminEmail = "your_email@gmail.com"; // ✏️ নিজের Gmail
let isAdmin = false;

// Login user
auth.signInWithPopup(new firebase.auth.GoogleAuthProvider())
.then(user=>{
  if(user.user.email === adminEmail){
    isAdmin = true;
    document.getElementById("adminPanel").style.display = "block";
    console.log("Admin logged in");
    calculateEarnings();
  }
});

// Sidebar toggle
function toggleMenu(){
  document.getElementById("sidebar").classList.toggle("active");
}

// Filter gallery
function filterCategory(category){
  const walls = document.getElementsByClassName("wall");
  for(let i=0;i<walls.length;i++){
    walls[i].style.display= category==="all"?"block":walls[i].classList.contains(category)?"block":"none";
  }
}

// Lightbox
let currentLightboxUrl = "";
function openLightbox(url){
  currentLightboxUrl = url;
  document.getElementById("lightboxImage").src = url;
  document.getElementById("lightboxOverlay").style.display = "flex";
}
function closeLightbox(){
  document.getElementById("lightboxOverlay").style.display = "none";
}
function downloadLightboxImage(){
  fetch(currentLightboxUrl)
    .then(resp=>resp.blob())
    .then(blob=>{
      const link=document.createElement("a");
      link.href = window.URL.createObjectURL(blob);
      link.download="wallpaper.jpg";
      link.click();

      // Add download log for earnings
      db.collection("downloads").add({image: currentLightboxUrl, timestamp: Date.now()});
      if(isAdmin) calculateEarnings();
    })
    .catch(err=>alert("Download failed!"));
}

// Upload photo
function uploadPhoto(){
  const file = document.getElementById("fileInput").files[0];
  const category = document.getElementById("categoryInput").value;
  if(!file){ alert("Select a file"); return; }

  const storageRef = storage.ref("images/"+file.name);
  storageRef.put(file).then(snapshot=>{
    snapshot.ref.getDownloadURL().then(url=>{
      db.collection("photos").add({image:url, category:category})
      .then(()=>{ alert("Upload Success"); loadGallery(); });
    });
  });
}

// Delete photo
function deletePhoto(docId, photoUrl){
  if(!isAdmin){ alert("Only admin can delete"); return; }
  if(confirm("Delete this photo?")){
    db.collection("photos").doc(docId).delete()
    .then(()=>{
      const storageRef = storage.refFromURL(photoUrl);
      storageRef.delete()
      .then(()=>{ loadGallery(); calculateEarnings(); })
      .catch(err=>alert(err));
    })
    .catch(err=>alert(err));
  }
}

// Gallery load
let galleryData = [];
function loadGallery(){
  const gallery = document.getElementById("gallery");
  gallery.innerHTML = "";
  db.collection("photos").get().then(snapshot=>{
    galleryData=[];
    snapshot.forEach(doc=>{
      const data = doc.data();
      galleryData.push({...data, docId:doc.id});
      const div=document.createElement("div");
      div.className="wall "+data.category;
      div.innerHTML = `
        <img src="${data.image}" onclick="openLightbox('${data.image}')">
        <button class="download" onclick="downloadLightboxImage()">Download</button>
        ${isAdmin? `<button class="delete-btn" onclick="deletePhoto('${doc.id}','${data.image}')">Delete</button>` : ""}
      `;
      gallery.appendChild(div);
    });
  });
}

// Search
function searchGallery(){
  const query=document.getElementById("searchBar").value.toLowerCase();
  const gallery=document.getElementById("gallery");
  gallery.innerHTML="";
  galleryData.forEach(data=>{
    if(data.category.toLowerCase().includes(query)){
      const div=document.createElement("div");
      div.className="wall "+data.category;
      div.innerHTML=`
        <img src="${data.image}" onclick="openLightbox('${data.image}')">
        <button class="download" onclick="downloadLightboxImage()">Download</button>
        ${isAdmin? `<button class="delete-btn" onclick="deletePhoto('${data.docId}','${data.image}')">Delete</button>` : ""}
      `;
      gallery.appendChild(div);
    }
  });
}

// Earnings calculation
function calculateEarnings(){
  const earningsDiv = document.getElementById("earnings");
  db.collection("downloads").get().then(snapshot=>{
    const totalDownloads = snapshot.size;
    const perDownloadEarning = 0.05; // Example: $0.05 per download
    const totalEarnings = (totalDownloads*perDownloadEarning).toFixed(2);
    earningsDiv.innerHTML = `
      <h3>Earnings Summary</h3>
      <p>Total Downloads: ${totalDownloads}</p>
      <p>Estimated Earnings: $${totalEarnings}</p>
    `;
  });
}

// Initial load
loadGallery();
</script>

</body>
</html>
